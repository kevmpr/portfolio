---
import CaseStudyCard from './CaseStudyCard.astro';
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const caseStudies = [
  {
    titleKey: 'case1.title' as const,
    challengeKey: 'case1.challenge' as const,
    solutionKey: 'case1.solution' as const,
    tech: ['Azure RBAC', 'PowerShell'],
    icon: 'shield',
  },
  {
    titleKey: 'case2.title' as const,
    challengeKey: 'case2.challenge' as const,
    solutionKey: 'case2.solution' as const,
    tech: ['Azure Resource Graph', 'Cloudockit', 'Governance'],
    icon: 'search',
  },
  {
    titleKey: 'case3.title' as const,
    challengeKey: 'case3.challenge' as const,
    solutionKey: 'case3.solution' as const,
    tech: ['Azure Backup', 'App Service Cloning', 'Disaster Recovery'],
    icon: 'migrate',
  },
  {
    titleKey: 'case4.title' as const,
    challengeKey: 'case4.challenge' as const,
    solutionKey: 'case4.solution' as const,
    tech: ['Azure Cost Management', 'Excel/PowerBI', 'FinOps'],
    icon: 'cost',
  },
  {
    titleKey: 'case5.title' as const,
    challengeKey: 'case5.challenge' as const,
    solutionKey: 'case5.solution' as const,
    tech: ['Technical Writing', 'Canva', 'Cloud Adoption Framework (CAF)'],
    icon: 'document',
  },
];
---

<section id="projects" class="relative py-20 lg:py-28">
  <!-- Background decoration -->
  <div class="absolute inset-0 pointer-events-none overflow-hidden">
    <div class="absolute top-0 right-0 w-72 h-72 bg-primary-400/10 dark:bg-primary-500/5 rounded-full blur-3xl"></div>
    <div class="absolute bottom-0 left-0 w-96 h-96 bg-accent-400/10 dark:bg-accent-500/5 rounded-full blur-3xl"></div>
  </div>

  <div class="relative max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section header -->
    <div class="text-center mb-16 reveal">
      <h2 class="text-4xl sm:text-5xl font-bold mb-4">
        <span class="bg-gradient-to-r from-primary-600 to-accent-500 bg-clip-text text-transparent">
          {t('casestudies.title')}
        </span>
      </h2>
    </div>

    <!-- Case Studies grid -->
    <div class="grid md:grid-cols-2 gap-6">
      {caseStudies.map((cs, i) => (
        <div class="reveal" style={`--reveal-delay: ${i * 120}ms`}>
          <CaseStudyCard
            title={t(cs.titleKey)}
            challenge={t(cs.challengeKey)}
            solution={t(cs.solutionKey)}
            tech={cs.tech}
            icon={cs.icon}
            challengeLabel={t('casestudies.challengeLabel')}
            solutionLabel={t('casestudies.solutionLabel')}
            stackLabel={t('casestudies.stackLabel')}
          />
        </div>
      ))}
    </div>
  </div>
</section>
